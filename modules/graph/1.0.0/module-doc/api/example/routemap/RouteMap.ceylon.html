<!DOCTYPE html><html xmlns='http://www.w3.org/1999/xhtml'><head><meta charset='UTF-8'/>
<title>RouteMap.ceylon</title><link href='../../.resources/favicon.ico' rel='shortcut icon'/>
<link href='../../.resources/ceylon.css' rel='stylesheet' type='text/css'/>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'/>
<script type='text/javascript'>var resourceBaseUrl = '../../.resources/'</script><script src='../../.resources/jquery-1.8.2.min.js' type='text/javascript'></script><script src='../../.resources/rainbow.min.js' type='text/javascript'></script><script src='../../.resources/ceylon.js' type='text/javascript'></script><script src='../../.resources/ceylondoc.js' type='text/javascript'></script></head><body><pre data-language='ceylon' style='font-family: Inconsolata, Monaco, Courier, monospace'>import graph {
	IncidenceGraph,
	Walk,
	Weights
}
import graph.multigraph {
	Multigraph
}
import graph.undirected {
	UndirectedEdge,
	UndirectedGraph
}

&quot;Distance measured in km.&quot;
by (&quot;ThorstenSeitz&quot;)
shared final class Distance(shared Float km) satisfies Summable&lt;Distance&gt; {
	shared actual Distance plus(Distance other) =&gt; Distance(km + other.km);
}

&quot;Duration measured in hours.&quot;
by (&quot;ThorstenSeitz&quot;)
shared final class Duration(shared Float hours) satisfies Summable&lt;Duration&gt; {
	shared actual Duration plus(Duration other) =&gt; Duration(hours + other.hours);
}

&quot;A city.&quot;
by (&quot;ThorstenSeitz&quot;)
shared final class City(shared String name) {}

&quot;A route between two cities.&quot;
by (&quot;ThorstenSeitz&quot;)
shared final class Route(
	shared String name,
	shared actual City source,
	shared actual City target,
	shared Distance distance,
	shared Duration travelTime) satisfies UndirectedEdge&lt;City,Route&gt; {

	shared actual Route reversed =&gt; Route(name, target, source, distance, travelTime);
}

&quot;A route map of [[cities|City]] connected by undirected [[routes|Route]] with a given [[distance|Distance]]
 and [[travel time|Duration]].
 The same cities may be connected by multiple routes (e.g. Autobahn or Bundesstra√üe) with different distances
 and travel times. The route map is therefore a [[Multigraph]].&quot;
by (&quot;ThorstenSeitz&quot;)
shared final class RouteMap({City*} cities, {Route*} routes) satisfies Multigraph&lt;City,Route&gt; &amp; IncidenceGraph&lt;City,Route&gt; &amp; UndirectedGraph&lt;City,Route&gt; {

	shared actual {Route*} edges =&gt; routes;

	shared actual {City*} vertices =&gt; cities;

	shared object distances satisfies Weights&lt;Distance,Route&gt; {
		shared actual Distance weight(Route route) =&gt; route.distance;
		shared actual Distance zero =&gt; Distance(0.0);
	}

	shared object travelTimes satisfies Weights&lt;Duration,Route&gt; {
		shared actual Duration weight(Route route) =&gt; route.travelTime;
		shared actual Duration zero =&gt; Duration(0.0);
	}

	shared actual {Route*} edgesConnecting(City source, City target) =&gt; adjacentEdges(source).filter((Route route) =&gt; route.target == target);
}

&quot;Example code demonstrating how to calculate different distances on a path or [[walk|Walk]].&quot;
shared void printPathInfo(RouteMap routeMap, Walk&lt;City,Route&gt; shortestPath) {

	Distance distance = shortestPath.distance(routeMap.distances);
	Duration travelTime = shortestPath.distance(routeMap.travelTimes);

	print(&quot;Distance = ``distance``&quot;);
	print(&quot;Travel time = ``travelTime``&quot;);
}
</pre></body></html>